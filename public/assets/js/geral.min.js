$("#enviar").on("click",(function(){$(".alert-success").hide(),$(".alert-danger").hide(),$("#message-error").html(""),$("#download").hide();var urlEnvia=$("#url").val(),pattern=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");if(!urlEnvia||!pattern.test(urlEnvia))return $(".alert-danger").show(),void $("#message-error").html("Informe uma URL");$.ajax({type:"POST",url:"gerador.php",data:{url:urlEnvia},dataType:"json",success:function(res){var imgQr;res.qr?($("#qr").attr("src",res.qr),$(".alert-success").show(),$("#download").show()):($(".alert-danger").show(),$("#message-error").html("Desculpe, houve um erro no processamento. O qr code n√£o foi gerado"))},error:function(res){res.responseText&&($(".alert-danger").show(),$("#message-error").html(res.responseText))}})})),document.getElementById("download").addEventListener("click",(function(){var img=document.getElementById("qr"),link=document.createElement("a");link.download="qr-image.png",link.href=img.src,link.click()}));